!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e["react-compound-slider"]={},e.React)}(this,function(e,t){"use strict";var n="default"in t?t.default:t,r=function(){};var o=r;function i(e){return function(){return e}}var u=function(){};u.thatReturns=i,u.thatReturnsFalse=i(!1),u.thatReturnsTrue=i(!0),u.thatReturnsNull=i(null),u.thatReturnsThis=function(){return this},u.thatReturnsArgument=function(e){return e};var a=u;var s=function(e,t,n,r,o,i,u,a){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,u,a],l=0;(s=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}},c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var h,v="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",f=(function(e){e.exports=function(){function e(e,t,n,r,o,i){i!==v&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}()}(h={exports:{}},h.exports),function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN});var d,m,y=(1===(d=f).length&&(m=d,d=function(e,t){return f(m(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;d(e[o],t)<0?n=o+1:r=o}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;d(e[o],t)>0?r=o:n=o+1}return n}}).right,g=Math.sqrt(50),b=Math.sqrt(10),M=Math.sqrt(2),T=function(e,t,n){var r,o,i,u,a,s,c,l,p=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),0==(a=n,s=(t-e)/Math.max(0,a),c=Math.floor(Math.log(s)/Math.LN10),l=s/Math.pow(10,c),u=c>=0?(l>=g?10:l>=b?5:l>=M?2:1)*Math.pow(10,c):-Math.pow(10,-c)/(l>=g?10:l>=b?5:l>=M?2:1))||!isFinite(u))return[];if(u>0)for(e=Math.ceil(e/u),t=Math.floor(t/u),i=new Array(o=Math.ceil(t-e+1));++p<o;)i[p]=(e+p)*u;else for(e=Math.floor(e*u),t=Math.ceil(t*u),i=new Array(o=Math.ceil(e-t+1));++p<o;)i[p]=(e-p)/u;return r&&i.reverse(),i};function S(){var e=0,t=1,n=[.5],r=[0,1],o=1;function i(e){return r[y(n,e,0,o)]}function u(){var r=-1;for(n=new Array(o);++r<o;)n[r]=((r+1)*t-(r-o)*e)/(o+1);return i}return i.domain=function(n){return n?(e=+n[0],t=+n[1],u()):[e,t]},i.range=function(e){return e?(r=e.slice(),o=r.length-1,u()):r.slice()},i}function w(e,t){return t-=e=+e,function(n){return e+t*n}}function k(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(){return t}}var P=function(e){return+e};function x(){var e=[0,1],t=[0,1],n=void 0;function r(){return n=null,o}function o(r){return(n||(i=t,u=(o=e)[0],a=o[1],s=i[0],c=i[1],a<u?(u=k(a,u),s=w(c,s)):(u=k(u,a),s=w(s,c)),n=function(e){return s(u(e))}))(+r);var o,i,u,a,s,c}return o.domain=function(t){return t?(e=t.map(P),r()):e.slice()},o.range=function(e){return e?(t=e.map(P),r()):t.slice()},o.ticks=function(t){var n=e;return T(n[0],n[n.length-1],t?10:t)},r()}var E=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach(function(e){return e&&e.apply(void 0,n)})}},C=(function(){function e(e){this.value=e}function t(t){var n,r;function o(n,r){try{var u=t[n](r),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){o("next",e)},function(e){o("throw",e)}):i(u.done?"return":"normal",u.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(i,u){var a={key:e,arg:t,resolve:i,reject:u,next:null};r?r=r.next=a:(n=r=a,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),O=(Object.assign,function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}),R=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},j=function(e){function t(){var n,r,o;C(this,t);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return n=r=babelHelpers.possibleConstructorReturn(this,e.call.apply(e,[this].concat(u))),r.getRailProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.emitMouse,o=t.emitTouch;return babelHelpers.extends({},e,{onMouseDown:E(e.onMouseDown,n),onTouchStart:E(e.onTouchStart,o)})},o=n,babelHelpers.possibleConstructorReturn(r,o)}return O(t,e),t.prototype.render=function(){var e=this.getRailProps,t=(0,this.props.children)({getRailProps:e});return t&&n.Children.only(t)},t}(t.Component),_=function(e){function t(){return C(this,t),R(this,e.apply(this,arguments))}return O(t,e),t.prototype.render=function(){var e=this.props,t=e.children,r=e.values,o=e.scale,i=e.count,u=e.emitMouse,a=e.emitTouch,s=t({ticks:(r||o.ticks(i)).map(function(e){return{id:"$$-"+e,value:e,percent:o(e)}}),emitMouse:u,emitTouch:a});return s&&n.Children.only(s)},t}(t.Component);_.defaultProps={count:10};var H=function(e){function t(){var n,r,o;C(this,t);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return n=r=babelHelpers.possibleConstructorReturn(this,e.call.apply(e,[this].concat(u))),r.getTrackProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.emitMouse,o=t.emitTouch;return babelHelpers.extends({},e,{onMouseDown:E(e.onMouseDown,n),onTouchStart:E(e.onTouchStart,o)})},o=n,babelHelpers.possibleConstructorReturn(r,o)}return O(t,e),t.prototype.render=function(){for(var e=this.getTrackProps,t=this.props,r=t.children,o=t.left,i=t.right,u=t.scale,a=t.handles,s=u.domain(),c=[],l=0;l<a.length+1;l++){var p=a[l-1],h=a[l];0===l&&!0===o?p={id:"$",value:s[0],percent:0}:l===a.length&&!0===i&&(h={id:"$",value:s[1],percent:100}),p&&h&&c.push({id:p.id+"-"+h.id,source:p,target:h})}var v=r({tracks:c,getTrackProps:e});return v&&n.Children.only(v)},t}(t.Component);H.defaultProps={left:!0,right:!0};var D=function(e){function t(){var n,r,o;C(this,t);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return n=r=babelHelpers.possibleConstructorReturn(this,e.call.apply(e,[this].concat(u))),r.getHandleProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.props,o=n.emitMouse,i=n.emitTouch;return babelHelpers.extends({},t,{onMouseDown:E(t.onMouseDown,function(t){return o(t,e)}),onTouchStart:E(t.onTouchStart,function(t){return i(t,e)})})},o=n,babelHelpers.possibleConstructorReturn(r,o)}return O(t,e),t.prototype.render=function(){var e=this.getHandleProps,t=this.props,r=(0,t.children)({handles:t.handles,getHandleProps:e});return r&&n.Children.only(r)},t}(t.Component);function L(e){return function(t,n){return t.val>n.val?e?-1:1:n.val>t.val?e?1:-1:0}}function I(e,t,n,r){var o=e.findIndex(function(e){return e.key===t});if(-1!==o){var i=e[o],u=i.key;if(i.val!==n)return[].concat(e.slice(0,o),[{key:u,val:n}],e.slice(o+1)).sort(L(r))}return e}function U(e,t){if(!e)return[0,0];var n=e.getBoundingClientRect();return t?[n.top,n.bottom]:[n.left,n.right]}function A(e,t,n){for(var r,o=(r=(""+n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(r[1]?r[1].length:0)-(r[2]?+r[2]:0)):0,i=+e.toFixed(o),u=+t.toFixed(o),a=[],s=i;s<=u;)a.push(s),s=+(s+n).toFixed(o);return a}function q(e){var t=e.type,n=e.touches;return!n||n.length>1||"touchend"===t.toLowerCase()&&n.length>0}function N(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}var V="react-compound-slider:",F=function(){},$=function(e){function t(n){C(this,t);var r=R(this,e.call(this,n));return r.slider=null,r.valueToPerc=x(),r.valueToStep=S(),r.pixelToStep=S(),r.onMouseMove=r.onMouseMove.bind(r),r.onTouchMove=r.onTouchMove.bind(r),r.onMove=r.onMove.bind(r),r.onMouseDown=r.onMouseDown.bind(r),r.onTouchStart=r.onTouchStart.bind(r),r.onStart=r.onStart.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r.onTouchEnd=r.onTouchEnd.bind(r),r}return O(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.defaultValues,n=e.values,r=e.domain,i=e.step,u=e.reversed;o(void 0===t,V+" defaultValues is deprecated. Use 'values' prop."),this.updateRange(r,i,u),this.updateValues(n||t,u)},t.prototype.componentWillReceiveProps=function(e){var t,n,r,o=e.domain,i=e.step,u=e.reversed,a=e.values,s=this.props;if(o[0]!==s.domain[0]||o[1]!==s.domain[1]||i!==s.step||u!==s.reversed){this.updateRange(o,i,u);var c=this.reMapValues(u);e.onChange(c),e.onUpdate(c)}this.active||(t=a,n=s.values,t===n||t.length===n.length&&t.reduce((r=n,function(e,t,n){return e&&r[n]===t}),!0))||this.updateValues(a,u)},t.prototype.reMapValues=function(e){var t=this.state.values;return this.updateValues(t.map(function(e){return e.val}),e)},t.prototype.updateValues=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],r=t.map(function(t){var n=e.valueToStep(t);return o(t===n,V+" Invalid value encountered. Changing "+t+" to "+n+"."),n}).map(function(e,t){return{key:"$$-"+t,val:e}}).sort(L(n));return this.setState(function(){return{values:r}}),r.map(function(e){return e.val})},t.prototype.updateRange=function(e,t,n){var r=e[0],i=e[1],u=A(r,i,t);this.valueToStep.range(u.slice()).domain([r-t/2,i+t/2]),!0===n?(this.valueToPerc.domain([r,i]).range([100,0]),u.reverse()):this.valueToPerc.domain([r,i]).range([0,100]),this.pixelToStep.range(u),o(i>r,V+" Max must be greater than min (even if reversed). Max is "+i+". Min is "+r+"."),o(u.length<=10001,V+" Increase step value. Found "+u.length.toLocaleString()+" values in range.");var a=u.length-1;o(u[n?a:0]===r&&u[n?0:a]===i,V+" The range is incorrectly calculated. Check domain (min, max) and step values.")},t.prototype.onMouseDown=function(e,t){this.onStart(e,t,!1)},t.prototype.onTouchStart=function(e,t){q(e)||this.onStart(e,t,!0)},t.prototype.onStart=function(e,t,n){var r=this.state.values;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),r.find(function(e){return e.key===t})?(this.active=t,n?this.addTouchEvents():this.addMouseEvents()):(this.active=null,this.requestMove(e,n))},t.prototype.requestMove=function(e,t){var n=this.state.values,r=this.props,o=r.vertical,i=r.reversed,u=this.slider;this.pixelToStep.domain(U(u,o));var a=void 0;a=t?this.pixelToStep(N(o,e)):this.pixelToStep(o?e.clientY:e.pageX);for(var s=null,c=1/0,l=0;l<n.length;l++){var p=Math.abs(this.valueToStep(n[l].val)-a);p<c&&(s=n[l].key,c=p)}if(s){var h=I(n,s,a,i);this.onMove(n,h,!0)}},t.prototype.addMouseEvents=function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},t.prototype.addTouchEvents=function(){document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd)},t.prototype.onMouseMove=function(e){var t=this.state.values,n=this.props,r=n.vertical,o=n.reversed,i=this.active,u=this.slider;this.pixelToStep.domain(U(u,r));var a=I(t,i,this.pixelToStep(r?e.clientY:e.pageX),o);this.onMove(t,a)},t.prototype.onTouchMove=function(e){var t=this.state.values,n=this.props,r=n.vertical,o=n.reversed,i=this.active,u=this.slider;if(!q(e)){this.pixelToStep.domain(U(u,r));var a=I(t,i,this.pixelToStep(N(r,e)),o);this.onMove(t,a)}},t.prototype.onMove=function(e,t,n){var r=this.props,i=r.mode,u=r.onUpdate,a=r.onChange;if(t!==e){var s=void 0;switch(i){case 1:s=t;break;case 2:s=function(e,t){for(var n=0;n<e.length;n++){if(e[n].key!==t[n].key)return e;if(t[n-1]&&t[n].val===t[n-1].val)return e;if(t[n+1]&&t[n].val===t[n+1].val)return e}return t}(e,t);break;default:s=t,o(!1,V+" Invalid mode value.")}this.setState({values:s}),u(s.map(function(e){return e.val})),n&&a(s.map(function(e){return e.val}))}},t.prototype.onMouseUp=function(){var e=this.state.values,t=this.props.onChange;this.active=null,t(e.map(function(e){return e.val})),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},t.prototype.onTouchEnd=function(){var e=this.state.values,t=this.props.onChange;this.active=null,t(e.map(function(e){return e.val})),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd)},t.prototype.render=function(){var e=this,t=this.state.values,r=this.props,o=r.className,i=r.rootStyle,u=t.map(function(t){var n=t.key,r=t.val;return{id:n,value:r,percent:e.valueToPerc(r)}}),a=n.Children.map(this.props.children,function(t){return t.type===j||t.type===_||t.type===H||t.type===D?n.cloneElement(t,{scale:e.valueToPerc,handles:u,emitMouse:e.onMouseDown,emitTouch:e.onTouchStart}):t});return n.createElement("div",{style:i||{},className:o,ref:function(t){return e.slider=t}},a)},t}(t.PureComponent);$.defaultProps={mode:1,step:.1,domain:[0,100],vertical:!1,reversed:!1,onUpdate:F,onChange:F},$.Rail=j,$.Ticks=_,$.Tracks=H,$.Handles=D,e.default=$,e.Rail=j,e.Ticks=_,e.Tracks=H,e.Handles=D,Object.defineProperty(e,"__esModule",{value:!0})});
